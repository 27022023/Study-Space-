<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Study Timer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- We will paste CSS into this <style> tag in the next step -->
<style>

</style>
</head>

<body class="theme-pastel">

    <header class="motivation">
        <h1 id="motivationText">Progress over perfection</h1>
    </header>

    <section class="timer-section">
        <div class="timer-container">
            <svg class="timer-ring" width="260" height="260">
                <circle class="timer-bg" cx="130" cy="130" r="110"></circle>
                <circle class="timer-progress" cx="130" cy="130" r="110"></circle>
            </svg>
            <div class="timer-display" id="timerDisplay">30:00</div>
        </div>

        <div class="timer-controls">
            <button id="startBtn">Start</button>
            <button id="pauseBtn">Pause</button>
            <button id="resetBtn">Reset</button>
        </div>

        <div class="duration-select">
            <button data-time="30">30 min</button>
            <button data-time="45">45 min</button>
            <button data-time="60">60 min</button>
            <button data-time="90">90 min</button>
            <button data-time="120">120 min</button>
            <button data-time="150">150 min</button>
            <button data-time="180">180 min</button>
        </div>
    </section>

    <section class="calendar-section">
        <h2>Your Study Streak</h2>
        <div id="calendar"></div>
    </section>

    <section class="theme-selector">
        <h3>Theme</h3>
        <button data-theme="pastel">Pastel</button>
        <button data-theme="neutral">Neutral</button>
        <button data-theme="scientific">Scientific</button>
    </section>

<!-- We will paste JavaScript into this <script> tag later -->
<script>

</script>

</body>
</html>
<script>
/* ---------- BASE LAYOUT ---------- */

body {
    margin: 0;
    font-family: "Poppins", sans-serif;
    background: #f7f7ff;
    color: #333;
    text-align: center;
    padding-bottom: 100px;
}

.motivation h1 {
    font-weight: 600;
    margin-top: 30px;
    font-size: 1.8rem;
}

/* ---------- TIMER SECTION ---------- */

.timer-section {
    margin-top: 40px;
}

.timer-container {
    position: relative;
    width: 260px;
    height: 260px;
    margin: 0 auto;
}

.timer-ring circle {
    fill: none;
    stroke-width: 14;
    stroke-linecap: round;
}

.timer-bg {
    stroke: #e5e5e5;
}

.timer-progress {
    stroke: var(--accent);
    stroke-dasharray: 690;
    stroke-dashoffset: 690;
    transition: stroke-dashoffset 0.3s linear;
    filter: drop-shadow(0 0 10px var(--glow));
}

.timer-display {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2rem;
    font-weight: 600;
}

/* ---------- BUTTONS ---------- */

.timer-controls button,
.duration-select button,
.theme-selector button {
    padding: 10px 18px;
    margin: 6px;
    border: none;
    border-radius: 10px;
    background: var(--accent);
    color: white;
    font-size: 1rem;
    cursor: pointer;
    transition: 0.2s;
}

button:hover {
    opacity: 0.8;
}

/* ---------- CALENDAR ---------- */

.calendar-section {
    margin-top: 60px;
}

#calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 8px;
    width: 90%;
    max-width: 400px;
    margin: 20px auto;
}

.calendar-day {
    padding: 12px;
    background: white;
    border-radius: 10px;
    font-size: 1.2rem;
    cursor: pointer;
    border: 1px solid #ddd;
    transition: 0.2s;
}

.calendar-day:hover {
    background: #f0f0ff;
}

/* ---------- THEMES ---------- */

.theme-pastel {
    --accent: #b39ddb;
    --glow: #d1c4e9;
    background: #faf7ff;
}

.theme-neutral {
    --accent: #a89f91;
    --glow: #d6d2cb;
    background: #f7f5f2;
}

.theme-scientific {
    --accent: #4a90e2;
    --glow: #b3d4fc;
    background: #eef6ff;
}

/* ---------- GLITTER ---------- */

.glitter {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
}

.sparkle, .star {
    position: absolute;
    width: 8px;
    height: 8px;
    opacity: 0.8;
    animation: fall 3s linear forwards;
}

.sparkle {
    border-radius: 50%;
    background: var(--accent);
}

.star {
    width: 10px;
    height: 10px;
    background: transparent;
    clip-path: polygon(
        50% 0%, 61% 35%, 98% 35%,
        68% 57%, 79% 91%, 50% 70%,
        21% 91%, 32% 57%, 2% 35%,
        39% 35%
    );
    background: var(--accent);
}

@keyframes fall {
    from { transform: translateY(-20px); }
    to { transform: translateY(100vh); opacity: 0; }
}
/* ------------------ TIMER LOGIC ------------------ */

let totalSeconds = 30 * 60;
let remainingSeconds = totalSeconds;
let timerInterval = null;

const display = document.getElementById("timerDisplay");
const progress = document.querySelector(".timer-progress");
const motivationText = document.getElementById("motivationText");

const messages = [
    "Progress over perfection",
    "You’re doing enough",
    "Small steps count",
    "Let’s make this session gentle",
    "You showed up — that matters",
    "One moment at a time"
];

function updateDisplay() {
    let m = Math.floor(remainingSeconds / 60);
    let s = remainingSeconds % 60;
    display.textContent = `${m}:${s.toString().padStart(2, "0")}`;
}

function updateRing() {
    const circumference = 690;
    const offset = circumference - (remainingSeconds / totalSeconds) * circumference;
    progress.style.strokeDashoffset = offset;
}

function startTimer() {
    if (timerInterval) return;

    motivationText.textContent = messages[Math.floor(Math.random() * messages.length)];

    timerInterval = setInterval(() => {
        remainingSeconds--;
        updateDisplay();
        updateRing();

        if (remainingSeconds <= 0) {
            clearInterval(timerInterval);
            timerInterval = null;
            remainingSeconds = 0;
            updateDisplay();
            updateRing();
            launchGlitter();
        }
    }, 1000);
}

function pauseTimer() {
    clearInterval(timerInterval);
    timerInterval = null;
}

function resetTimer() {
    pauseTimer();
    remainingSeconds = totalSeconds;
    updateDisplay();
    updateRing();
}

/* Buttons */
document.getElementById("startBtn").onclick = startTimer;
document.getElementById("pauseBtn").onclick = pauseTimer;
document.getElementById("resetBtn").onclick = resetTimer;

/* Duration buttons */
document.querySelectorAll(".duration-select button").forEach(btn => {
    btn.onclick = () => {
        totalSeconds = btn.dataset.time * 60;
        remainingSeconds = totalSeconds;
        updateDisplay();
        updateRing();
        localStorage.setItem("savedDuration", totalSeconds);
    };
});

/* Load saved duration */
if (localStorage.getItem("savedDuration")) {
    totalSeconds = parseInt(localStorage.getItem("savedDuration"));
    remainingSeconds = totalSeconds;
    updateDisplay();
    updateRing();
}

/* ------------------ GLITTER EFFECT ------------------ */

function launchGlitter() {
    const glitterContainer = document.createElement("div");
    glitterContainer.classList.add("glitter");
    document.body.appendChild(glitterContainer);

    for (let i = 0; i < 40; i++) {
        const sparkle = document.createElement("div");
        sparkle.classList.add(Math.random() > 0.5 ? "sparkle" : "star");
        sparkle.style.left = Math.random() * 100 + "vw";
        sparkle.style.animationDuration = 2 + Math.random() * 2 + "s";
        glitterContainer.appendChild(sparkle);
    }

    setTimeout(() => glitterContainer.remove(), 4000);
}

/* ------------------ CALENDAR ------------------ */

const calendar = document.getElementById("calendar");

function generateCalendar() {
    calendar.innerHTML = "";
    const now = new Date();
    const year = now.getFullYear();
    const month = now.getMonth();
    const days = new Date(year, month + 1, 0).getDate();

    const saved = JSON.parse(localStorage.getItem("calendar-" + month)) || {};

    for (let d = 1; d <= days; d++) {
        const day = document.createElement("div");
        day.classList.add("calendar-day");
        day.textContent = saved[d] || d;

        day.onclick = () => {
            const emoji = prompt("Choose an emoji for today:");
            if (emoji) {
                saved[d] = emoji;
                day.textContent = emoji;
                localStorage.setItem("calendar-" + month, JSON.stringify(saved));
            }
        };

        calendar.appendChild(day);
    }
}

generateCalendar();

/* ------------------ THEME SWITCHER ------------------ */

document.querySelectorAll(".theme-selector button").forEach(btn => {
    btn.onclick = () => {
        document.body.className = "theme-" + btn.dataset.theme;
        localStorage.setItem("theme", btn.dataset.theme);
    };
});

/* Load saved theme */
if (localStorage.getItem("theme")) {
    document.body.className = "theme-" + localStorage.getItem("theme");
}
        
